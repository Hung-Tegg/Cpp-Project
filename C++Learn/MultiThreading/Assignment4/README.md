/*
  Rewrite the code of codition.cc and use boolean flag instead condition variable.
*/